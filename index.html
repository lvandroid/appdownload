<!DOCTYPE html>
<html>
<head>
<title>é­”æ€¥ä¾¿è½¦ä¸»appä¸‹è½½</title>
<style>
    body {
        width: 35em;
        margin: 0 auto;
        font-family: Tahoma, Verdana, Arial, sans-serif;
    }

    .div-left{float:left;width:250px;height:50px;border:1px solid #F00} 
    button{
        width: 90px;
        height: 20px;
    }
</style>
<script src="qrcode.js">
</script>
</head>
<body>
    <h1>é­”æ€¥ä¾¿è½¦ä¸»APPä¸‹è½½</h1>

    <h4>æœ€æ–°ç‰ˆæœ¬ç‚¹å‡»ç›¸åº”çš„æŒ‰é’®ç”ŸæˆäºŒç»´ç æ‰«æä¸‹è½½</h4>

    <a id="download" style="display:none">å¦‚æœæƒ³ä¸‹è½½é€‰æ‹©ç‰ˆæœ¬çš„apkæ–‡ä»¶åˆ°ç”µè„‘å°±ç‚¹æˆ‘å§ğŸ˜º</a>
    <table>
        <tr>
            <td>
                <button id="debug" onclick="debugFun()">debugæœ€æ–°ç‰ˆ</button><br><br><br>
                <button id="pre" onclick="preFun()">preæœ€æ–°ç‰ˆ</button><br><br><br>
                <button id="release" onclick="releaseFun()">releaseæœ€æ–°ç‰ˆ</button><br><br><br>
            </td>
            <td>
                    <p id="gen_qrcode"/>
            </td>
        </tr>
    </table>

    <h4>å…¶ä»–ç‰ˆæœ¬äºŒç»´ç :</h4><br>
    æ ¼å¼å¦‚ä¸‹<br><br>
    æƒ³è¦ä¸‹è½½æµ‹è¯•ç¯å¢ƒçš„2.3ç‰ˆæœ¬,åˆ™è¾“å…¥d23 <br>
    æƒ³è¦ä¸‹è½½é¢„å‘ç¯å¢ƒçš„2.4ç‰ˆæœ¬,åˆ™è¾“å…¥p24 <br>
    æƒ³è¦ä¸‹è½½ç”Ÿäº§ç¯å¢ƒçš„2.5ç‰ˆæœ¬,åˆ™è¾“å…¥r25 <br>
    
    å†ç‚¹å‡»ç”ŸæˆäºŒç»´ç æ—¢å¯<br>
    <br>
    <input type="text" id="input"/>
    <button id="btn_code" onclick="genMyCode()">ç”ŸæˆäºŒç»´ç </button>
</body>

<script>
    var host="http://192.168.1.170:8080/"
    var debug = host+"app-debug.apk"
    var pre= host+"app-pre.apk"
    var release= host+"app-release.apk"

    qr_txt=document.getElementById("input").value

    var qrcode = new QRCode(document.getElementById("gen_qrcode"),qr_txt)
 

    function getVersion(version){
        if(version.length<2)return version
        v =version.charAt(0)
        var version_name
        if (v=="d") {
            version_name="app-debug"
        }else if(v=="p"){
            version_name="app-pre"
        }else if(v=="r"){
            version_name="app-release"
        }else{
            alert("æ ¼å¼ä¸æ­£ç¡®")

        }
        number= version.substring(1,version.length)
        var number_str=""
        for(i=0;i<=number.length-1;i++){
            if(i==number.length-1){
                number_str+=number[i]
            }else{
                number_str+=number[i]+"."
            }
        }
        var ttt =host+version_name+"_"+number_str+".apk"
        return (host+version_name+"_"+number_str+".apk")
    }

    function gen(version){
        qrcode.clear()
        qrcode.makeCode(version)
        //åŠ¨æ€ç”Ÿæˆä¸‹è½½è¿æ¥å¹¶æ˜¾ç¤º
        var download = document.getElementById("download")
        download.style.display="inline"
        download.setAttribute("href",version)
    }

    function debugFun(){
        gen(debug)
    }

    function preFun(){
        gen(pre)
    }

    function releaseFun(){
        gen(release)
    }
    function genMyCode(){
        var v = getVersion(document.getElementById("input").value)
        gen(v)
    }
</script>
</html>
